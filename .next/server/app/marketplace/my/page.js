(()=>{var e={};e.id=658,e.ids=[658],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},98897:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),r(98570),r(83794),r(71227),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["marketplace",{children:["my",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,98570)),"C:\\Users\\Legacy\\Desktop\\iit-international-student-dashboard\\app\\marketplace\\my\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83794)),"C:\\Users\\Legacy\\Desktop\\iit-international-student-dashboard\\app\\marketplace\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71227)),"C:\\Users\\Legacy\\Desktop\\iit-international-student-dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Legacy\\Desktop\\iit-international-student-dashboard\\app\\marketplace\\my\\page.tsx"],u="/marketplace/my/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/marketplace/my/page",pathname:"/marketplace/my",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49530:(e,t,r)=>{Promise.resolve().then(r.bind(r,12899)),Promise.resolve().then(r.bind(r,34461)),Promise.resolve().then(r.t.bind(r,92481,23)),Promise.resolve().then(r.t.bind(r,79404,23))},51649:(e,t,r)=>{Promise.resolve().then(r.bind(r,82746))},12899:(e,t,r)=>{"use strict";r.d(t,{Sidebar:()=>h});var s=r(10326),a=r(90434),n=r(35047),i=r(41135),o=r(24319),l=r(26641),d=r(77636),c=r(59308),u=r(24061),p=r(36283),f=r(34565),x=r(85529);let m=[{label:"Dashboard",href:"/dashboard",icon:o.Z},{label:"Pre-Arrival",href:"/pre-arrival",icon:l.Z},{label:"Campus Navigation",href:"/campus-navigation",icon:d.Z},{label:"Academic Integration",href:"/academic-integration",icon:c.Z},{label:"Social Networking",href:"/social-networking",icon:u.Z},{label:"Resource Directory",href:"/resource-directory",icon:p.Z},{label:"Marketplace",href:"/marketplace",icon:f.Z},{label:"Profile",href:"/profile",icon:x.Z}];function h(){let e=(0,n.usePathname)();return(0,s.jsxs)("aside",{className:" hidden md:flex sticky top-0 h-screen w-64 flex-shrink-0 flex-col bg-black/95 shadow-2xl ",children:[(0,s.jsxs)("div",{className:"flex h-16 items-center gap-2 px-5",children:[s.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-red-600 via-red-500 to-red-400 text-white shadow-lg",children:s.jsx("span",{className:"text-lg font-bold",children:"IIT"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-semibold tracking-tight text-slate-50",children:"IIT Intl Student Hub"}),s.jsx("p",{className:"text-xs text-slate-400",children:"Illinois Institute of Technology \xb7 Chicago"})]})]}),s.jsx("nav",{className:"mt-4 flex-1 space-y-1 overflow-y-auto px-3 pb-4",children:m.map(t=>{let r=t.icon,n=e===t.href||"/dashboard"!==t.href&&e.startsWith(t.href);return(0,s.jsxs)(a.default,{href:t.href,className:(0,i.Z)("group flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition-all","text-slate-200 hover:bg-red-600 hover:text-white","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500",n&&"bg-red-600 text-white shadow-lg shadow-red-900/40"),children:[s.jsx(r,{className:"h-4 w-4"}),s.jsx("span",{children:t.label})]},t.href)})}),s.jsx("div",{className:"border-t border-slate-800 px-4 py-3",children:s.jsx("p",{className:"text-xs text-slate-500",children:"Tip: Bookmark this dashboard to access your IIT support toolkit in one click."})})]})}},74165:(e,t,r)=>{"use strict";r.d(t,{B:()=>i,r:()=>o});var s=r(10326),a=r(17577);let n=(0,a.createContext)(void 0);function i({children:e}){let[t,r]=(0,a.useState)([]);return s.jsx(n.Provider,{value:{items:t,addToCart:e=>{r(t=>t.find(t=>t.product.id===e.id)?t.map(t=>t.product.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{product:e,quantity:1}])},removeFromCart:e=>{r(t=>t.filter(t=>t.product.id!==e))},clearCart:()=>r([])},children:e})}function o(){let e=(0,a.useContext)(n);if(!e)throw Error("useMarketplaceCart must be used within MarketplaceCartProvider");return e}},82746:(e,t,r)=>{"use strict";r.d(t,{MarketplaceCartLayoutClient:()=>n});var s=r(10326),a=r(74165);function n({children:e}){return s.jsx(a.B,{children:e})}},83794:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(19510);let a=(0,r(68570).createProxy)(String.raw`C:\Users\Legacy\Desktop\iit-international-student-dashboard\components\marketplace\MarketplaceCartLayoutClient.tsx#MarketplaceCartLayoutClient`);function n({children:e}){return s.jsx(a,{children:e})}},98570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(19510),a=r(17710),n=r(57371),i=r(58585),o=r(83493),l=r(90455),d=r(88806),c=r(82959),u=r(66601);async function p(){let e=await (0,l.V)();e||(0,i.redirect)("/login");let t=await o._.product.findMany({where:{ownerId:e.id},orderBy:{createdAt:"desc"}});return(0,s.jsxs)("div",{className:"flex min-h-screen bg-slate-950 text-slate-100",children:[s.jsx(d.Y,{}),(0,s.jsxs)("div",{className:"flex min-h-screen flex-1 flex-col",children:[s.jsx(c.l,{}),s.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-900 p-4 md:p-6",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl space-y-6",children:[(0,s.jsxs)("section",{className:"flex flex-col justify-between gap-3 md:flex-row md:items-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-red-300",children:"Marketplace \xb7 My Listings"}),s.jsx("h1",{className:"text-xl font-semibold md:text-2xl",children:"Your student marketplace listings"}),s.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:"Manage items you've posted for other IIT students — textbooks, dorm essentials, electronics, and more."})]}),s.jsx(n.default,{href:"/marketplace/sell",className:"inline-flex items-center justify-center rounded-full bg-red-600 px-4 py-2 text-[11px] font-semibold text-white shadow-sm shadow-red-900/40 hover:bg-red-500",children:"Post a new listing"})]}),0===t.length?(0,s.jsxs)(u.Z,{className:"bg-slate-950/80 text-slate-50",children:[s.jsx("p",{className:"text-sm font-semibold",children:"You haven't posted any listings yet."}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-slate-300",children:["Use the ",s.jsx("span",{className:"font-semibold",children:"“Post a new listing”"})," ","button above to sell textbooks, dorm items, or electronics to other IIT students."]})]}):(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("p",{className:"text-[11px] text-slate-400",children:["Showing"," ",s.jsx("span",{className:"font-semibold text-slate-100",children:t.length})," ","listing",1===t.length?"":"s"," you've posted."]}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,s.jsxs)(u.Z,{className:"flex flex-col overflow-hidden bg-slate-950/90 p-0 ring-1 ring-slate-800",children:[(0,s.jsxs)("div",{className:"relative h-36 w-full overflow-hidden bg-slate-900",children:[s.jsx(a.default,{src:e.imageUrl,alt:e.title,fill:!0,className:"object-cover transition-transform duration-300 hover:scale-105"}),!e.isActive&&s.jsx("span",{className:"absolute left-2 top-2 rounded-full bg-red-600 px-2 py-0.5 text-[10px] font-semibold text-white shadow-sm shadow-red-900/50",children:"Sold / Inactive"})]}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-1 p-3 text-[11px]",children:[s.jsx("p",{className:"line-clamp-1 text-xs font-semibold text-slate-50",children:e.title}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-400",children:[e.category," \xb7 ",e.condition]}),(0,s.jsxs)("p",{className:"mt-1 text-sm font-semibold text-emerald-300",children:["$",(e.priceCents/100).toFixed(2)]}),(0,s.jsxs)("p",{className:"mt-auto text-[10px] text-slate-500",children:["Campus: ",e.campus]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2",children:[s.jsx(n.default,{href:`/marketplace/${e.id}`,className:"inline-flex flex-1 items-center justify-center rounded-lg bg-slate-800 px-2 py-1.5 text-[11px] font-semibold text-slate-50 hover:bg-slate-700",children:"View / Manage"}),!e.isActive&&s.jsx("span",{className:"rounded-lg bg-slate-900 px-2 py-1 text-[10px] text-slate-300",children:"Sold"})]})]})]},e.id))})]})]})})]})]})}},88806:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\Legacy\Desktop\iit-international-student-dashboard\components\layout\Sidebar.tsx#Sidebar`)},82959:(e,t,r)=>{"use strict";r.d(t,{l:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\Legacy\Desktop\iit-international-student-dashboard\components\layout\TopNavbar.tsx#TopNavbar`)},66601:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(19510),a=r(55761);function n({children:e,className:t}){return s.jsx("div",{className:(0,a.W)("rounded-2xl border border-slate-500/90 bg-slate-200/80 p-4 shadow-lg shadow-black/40",t),children:e})}},90455:(e,t,r)=>{"use strict";async function s(){try{let e=await fetch("http://localhost:3000/api/auth/me",{cache:"no-store"});if(!e.ok)return null;return(await e.json()).student??null}catch(e){return console.error("getCurrentStudent error:",e),null}}r.d(t,{V:()=>s})},83493:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});let s=require("@prisma/client"),a=globalThis.prisma??new s.PrismaClient({log:["error","warn"]})},57371:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(670),a=r.n(s)},58585:(e,t,r)=>{"use strict";var s=r(61085);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}})},61085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return i},RedirectType:function(){return s.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(83953),a=r(16399);class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return x},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return p},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let a=r(54580),n=r(72934),i=r(8586),o="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=i.RedirectStatusCode.TemporaryRedirect);let s=Error(o);s.digest=o+";"+t+";"+e+";"+r+";";let n=a.requestAsyncStorage.getStore();return n&&(s.mutableCookies=n.mutableCookies),s}function d(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,a]=e.digest.split(";",4),n=Number(a);return t===o&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(n)&&n in i.RedirectStatusCode}function p(e){return u(e)?e.digest.split(";",3)[2]:null}function f(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function x(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},670:(e,t,r)=>{"use strict";let{createProxy:s}=r(68570);e.exports=s("C:\\Users\\Legacy\\Desktop\\iit-international-student-dashboard\\node_modules\\next\\dist\\client\\link.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,7261,9404,285,7788,3981],()=>r(98897));module.exports=s})();