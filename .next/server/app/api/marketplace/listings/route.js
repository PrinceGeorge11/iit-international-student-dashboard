"use strict";(()=>{var e={};e.id=1457,e.ids=[1457],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},11067:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>u});var s=r(49303),i=r(88716),n=r(60670),o=r(87070),p=r(83493);async function u(e){try{let{title:t,description:r,priceCents:a,category:s,condition:i,campus:n,imageUrl:u,paymentOptions:c}=await e.json()||{};if(!t||!r||!s||"number"!=typeof a||a<=0)return o.NextResponse.json({error:"Missing or invalid required fields."},{status:400});if(!c||"string"!=typeof c)return o.NextResponse.json({error:"paymentOptions must be a comma-separated string."},{status:400});let l=await p._.product.create({data:{title:t.trim(),slug:t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")+"-"+Date.now(),description:r.trim(),priceCents:a,category:s.trim(),condition:i||"Good",campus:n||"Mies Campus",imageUrl:u||"",paymentOptions:c,isActive:!0}});return o.NextResponse.json({product:l},{status:201})}catch(e){return console.error("Create product error:",e),o.NextResponse.json({error:"Failed to create listing."},{status:500})}}async function c(){let e=await p._.product.findMany({where:{isActive:!0},orderBy:{createdAt:"desc"}});return o.NextResponse.json({products:e})}let l=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/marketplace/listings/route",pathname:"/api/marketplace/listings",filename:"route",bundlePath:"app/api/marketplace/listings/route"},resolvedPagePath:"C:\\Users\\Legacy\\Desktop\\iit-international-student-dashboard\\app\\api\\marketplace\\listings\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=l,x="/api/marketplace/listings/route";function f(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},83493:(e,t,r)=>{r.d(t,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient({log:["error","warn"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972],()=>r(11067));module.exports=a})();