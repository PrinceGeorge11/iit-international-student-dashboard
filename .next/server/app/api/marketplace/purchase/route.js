"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/marketplace/purchase/route";
exports.ids = ["app/api/marketplace/purchase/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarketplace%2Fpurchase%2Froute&page=%2Fapi%2Fmarketplace%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarketplace%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarketplace%2Fpurchase%2Froute&page=%2Fapi%2Fmarketplace%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarketplace%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Legacy_Desktop_iit_international_student_dashboard_app_api_marketplace_purchase_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/marketplace/purchase/route.ts */ \"(rsc)/./app/api/marketplace/purchase/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/marketplace/purchase/route\",\n        pathname: \"/api/marketplace/purchase\",\n        filename: \"route\",\n        bundlePath: \"app/api/marketplace/purchase/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Legacy\\\\Desktop\\\\iit-international-student-dashboard\\\\app\\\\api\\\\marketplace\\\\purchase\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Legacy_Desktop_iit_international_student_dashboard_app_api_marketplace_purchase_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/marketplace/purchase/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtYXJrZXRwbGFjZSUyRnB1cmNoYXNlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtYXJrZXRwbGFjZSUyRnB1cmNoYXNlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWFya2V0cGxhY2UlMkZwdXJjaGFzZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNMZWdhY3klNUNEZXNrdG9wJTVDaWl0LWludGVybmF0aW9uYWwtc3R1ZGVudC1kYXNoYm9hcmQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0xlZ2FjeSU1Q0Rlc2t0b3AlNUNpaXQtaW50ZXJuYXRpb25hbC1zdHVkZW50LWRhc2hib2FyZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEQ7QUFDdkk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9paXQtaW50ZXJuYXRpb25hbC1zdHVkZW50LWRhc2hib2FyZC8/YzJmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxMZWdhY3lcXFxcRGVza3RvcFxcXFxpaXQtaW50ZXJuYXRpb25hbC1zdHVkZW50LWRhc2hib2FyZFxcXFxhcHBcXFxcYXBpXFxcXG1hcmtldHBsYWNlXFxcXHB1cmNoYXNlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tYXJrZXRwbGFjZS9wdXJjaGFzZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21hcmtldHBsYWNlL3B1cmNoYXNlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tYXJrZXRwbGFjZS9wdXJjaGFzZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXExlZ2FjeVxcXFxEZXNrdG9wXFxcXGlpdC1pbnRlcm5hdGlvbmFsLXN0dWRlbnQtZGFzaGJvYXJkXFxcXGFwcFxcXFxhcGlcXFxcbWFya2V0cGxhY2VcXFxccHVyY2hhc2VcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21hcmtldHBsYWNlL3B1cmNoYXNlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarketplace%2Fpurchase%2Froute&page=%2Fapi%2Fmarketplace%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarketplace%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/marketplace/purchase/route.ts":
/*!***********************************************!*\
  !*** ./app/api/marketplace/purchase/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! stripe */ \"(rsc)/./node_modules/stripe/esm/stripe.esm.node.js\");\n// app/api/marketplace/purchase/route.ts\n\n\n\n\nconst stripeSecret = process.env.STRIPE_SECRET_KEY;\nconst appUrl = \"http://localhost:3000\" || 0;\nconst stripe = stripeSecret ? new stripe__WEBPACK_IMPORTED_MODULE_3__[\"default\"](stripeSecret, {\n    apiVersion: \"2024-06-20\"\n}) : null;\nasync function POST(req) {\n    const student = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getCurrentStudent)();\n    if (!student) return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Unauthorized\", {\n        status: 401\n    });\n    const { productId, paymentMethod } = await req.json();\n    if (!productId || !paymentMethod) {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Missing productId or paymentMethod\", {\n            status: 400\n        });\n    }\n    if (![\n        \"card\",\n        \"in_person\"\n    ].includes(paymentMethod)) {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Invalid payment method\", {\n            status: 400\n        });\n    }\n    const product = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.product.findUnique({\n        where: {\n            id: productId\n        }\n    });\n    if (!product || !product.isActive) {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Product not available\", {\n            status: 400\n        });\n    }\n    if (product.ownerId === student.id) {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"You cannot purchase your own listing\", {\n            status: 400\n        });\n    }\n    // Create order first\n    let stripeSessionId = null;\n    if (paymentMethod === \"card\") {\n        if (!stripe) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Stripe is not configured. Set STRIPE_SECRET_KEY.\", {\n                status: 500\n            });\n        }\n        const session = await stripe.checkout.sessions.create({\n            mode: \"payment\",\n            payment_method_types: [\n                \"card\"\n            ],\n            line_items: [\n                {\n                    price_data: {\n                        currency: \"usd\",\n                        unit_amount: product.priceCents,\n                        product_data: {\n                            name: product.title,\n                            description: product.description\n                        }\n                    },\n                    quantity: 1\n                }\n            ],\n            success_url: `${appUrl}/marketplace/success?session_id={CHECKOUT_SESSION_ID}`,\n            cancel_url: `${appUrl}/marketplace/${product.id}`,\n            metadata: {\n                productId: product.id,\n                buyerId: student.id\n            }\n        });\n        stripeSessionId = session.id;\n    // NOTE:\n    // In a production app, you'd mark the order as \"created\" now and\n    // switch to \"paid\" in a Stripe webhook. For this project, weâ€™ll\n    // immediately mark it as sold so it disappears from the marketplace.\n    }\n    const order = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.order.create({\n        data: {\n            productId: product.id,\n            buyerId: student.id,\n            paymentMethod,\n            status: paymentMethod === \"card\" ? \"paid\" : \"created\",\n            stripeSessionId: stripeSessionId || undefined\n        }\n    });\n    // Mark listing as sold / inactive\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.product.update({\n        where: {\n            id: product.id\n        },\n        data: {\n            isActive: false,\n            soldAt: new Date()\n        }\n    });\n    // Create buyer-seller conversation\n    const conversation = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.marketplaceConversation.create({\n        data: {\n            orderId: order.id,\n            buyerId: student.id,\n            sellerId: product.ownerId,\n            messages: {\n                create: {\n                    senderId: student.id,\n                    content: paymentMethod === \"card\" ? \"Hi, I just purchased this item via card. When can we arrange delivery/pickup?\" : \"Hi, I reserved this item for in-person payment. When and where can we meet on campus?\"\n                }\n            }\n        }\n    });\n    if (paymentMethod === \"card\" && stripeSessionId) {\n        const session = await stripe.checkout.sessions.retrieve(stripeSessionId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            checkoutUrl: session.url,\n            orderId: order.id,\n            conversationId: conversation.id\n        });\n    }\n    // In-person: no external redirect, just send user to chat\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        orderId: order.id,\n        conversationId: conversation.id\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL21hcmtldHBsYWNlL3B1cmNoYXNlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsd0NBQXdDO0FBQ2dCO0FBQ2xCO0FBQ1M7QUFDbkI7QUFFNUIsTUFBTUksZUFBZUMsUUFBUUMsR0FBRyxDQUFDQyxpQkFBaUI7QUFDbEQsTUFBTUMsU0FBU0gsdUJBQStCLElBQUksQ0FBdUI7QUFFekUsTUFBTUssU0FBU04sZUFDWCxJQUFJRCw4Q0FBTUEsQ0FBQ0MsY0FBYztJQUN2Qk8sWUFBWTtBQUNkLEtBQ0E7QUFFRyxlQUFlQyxLQUFLQyxHQUFnQjtJQUN6QyxNQUFNQyxVQUFVLE1BQU1aLDREQUFpQkE7SUFDdkMsSUFBSSxDQUFDWSxTQUFTLE9BQU8sSUFBSWQscURBQVlBLENBQUMsZ0JBQWdCO1FBQUVlLFFBQVE7SUFBSTtJQUVwRSxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsYUFBYSxFQUFFLEdBQUcsTUFBTUosSUFBSUssSUFBSTtJQUVuRCxJQUFJLENBQUNGLGFBQWEsQ0FBQ0MsZUFBZTtRQUNoQyxPQUFPLElBQUlqQixxREFBWUEsQ0FBQyxzQ0FBc0M7WUFDNURlLFFBQVE7UUFDVjtJQUNGO0lBRUEsSUFBSSxDQUFDO1FBQUM7UUFBUTtLQUFZLENBQUNJLFFBQVEsQ0FBQ0YsZ0JBQWdCO1FBQ2xELE9BQU8sSUFBSWpCLHFEQUFZQSxDQUFDLDBCQUEwQjtZQUFFZSxRQUFRO1FBQUk7SUFDbEU7SUFFQSxNQUFNSyxVQUFVLE1BQU1uQiwrQ0FBTUEsQ0FBQ21CLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDO1FBQzlDQyxPQUFPO1lBQUVDLElBQUlQO1FBQVU7SUFDekI7SUFFQSxJQUFJLENBQUNJLFdBQVcsQ0FBQ0EsUUFBUUksUUFBUSxFQUFFO1FBQ2pDLE9BQU8sSUFBSXhCLHFEQUFZQSxDQUFDLHlCQUF5QjtZQUFFZSxRQUFRO1FBQUk7SUFDakU7SUFFQSxJQUFJSyxRQUFRSyxPQUFPLEtBQUtYLFFBQVFTLEVBQUUsRUFBRTtRQUNsQyxPQUFPLElBQUl2QixxREFBWUEsQ0FBQyx3Q0FBd0M7WUFDOURlLFFBQVE7UUFDVjtJQUNGO0lBRUEscUJBQXFCO0lBQ3JCLElBQUlXLGtCQUFpQztJQUVyQyxJQUFJVCxrQkFBa0IsUUFBUTtRQUM1QixJQUFJLENBQUNQLFFBQVE7WUFDWCxPQUFPLElBQUlWLHFEQUFZQSxDQUNyQixvREFDQTtnQkFBRWUsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTVksVUFBVSxNQUFNakIsT0FBT2tCLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUM7WUFDcERDLE1BQU07WUFDTkMsc0JBQXNCO2dCQUFDO2FBQU87WUFDOUJDLFlBQVk7Z0JBQ1Y7b0JBQ0VDLFlBQVk7d0JBQ1ZDLFVBQVU7d0JBQ1ZDLGFBQWFoQixRQUFRaUIsVUFBVTt3QkFDL0JDLGNBQWM7NEJBQ1pDLE1BQU1uQixRQUFRb0IsS0FBSzs0QkFDbkJDLGFBQWFyQixRQUFRcUIsV0FBVzt3QkFDbEM7b0JBQ0Y7b0JBQ0FDLFVBQVU7Z0JBQ1o7YUFDRDtZQUNEQyxhQUFhLENBQUMsRUFBRW5DLE9BQU8scURBQXFELENBQUM7WUFDN0VvQyxZQUFZLENBQUMsRUFBRXBDLE9BQU8sYUFBYSxFQUFFWSxRQUFRRyxFQUFFLENBQUMsQ0FBQztZQUNqRHNCLFVBQVU7Z0JBQ1I3QixXQUFXSSxRQUFRRyxFQUFFO2dCQUNyQnVCLFNBQVNoQyxRQUFRUyxFQUFFO1lBQ3JCO1FBQ0Y7UUFFQUcsa0JBQWtCQyxRQUFRSixFQUFFO0lBRTVCLFFBQVE7SUFDUixpRUFBaUU7SUFDakUsZ0VBQWdFO0lBQ2hFLHFFQUFxRTtJQUN2RTtJQUVBLE1BQU13QixRQUFRLE1BQU05QywrQ0FBTUEsQ0FBQzhDLEtBQUssQ0FBQ2pCLE1BQU0sQ0FBQztRQUN0Q2tCLE1BQU07WUFDSmhDLFdBQVdJLFFBQVFHLEVBQUU7WUFDckJ1QixTQUFTaEMsUUFBUVMsRUFBRTtZQUNuQk47WUFDQUYsUUFBUUUsa0JBQWtCLFNBQVMsU0FBUztZQUM1Q1MsaUJBQWlCQSxtQkFBbUJ1QjtRQUN0QztJQUNGO0lBRUEsa0NBQWtDO0lBQ2xDLE1BQU1oRCwrQ0FBTUEsQ0FBQ21CLE9BQU8sQ0FBQzhCLE1BQU0sQ0FBQztRQUMxQjVCLE9BQU87WUFBRUMsSUFBSUgsUUFBUUcsRUFBRTtRQUFDO1FBQ3hCeUIsTUFBTTtZQUNKeEIsVUFBVTtZQUNWMkIsUUFBUSxJQUFJQztRQUNkO0lBQ0Y7SUFFQSxtQ0FBbUM7SUFDbkMsTUFBTUMsZUFBZSxNQUFNcEQsK0NBQU1BLENBQUNxRCx1QkFBdUIsQ0FBQ3hCLE1BQU0sQ0FBQztRQUMvRGtCLE1BQU07WUFDSk8sU0FBU1IsTUFBTXhCLEVBQUU7WUFDakJ1QixTQUFTaEMsUUFBUVMsRUFBRTtZQUNuQmlDLFVBQVVwQyxRQUFRSyxPQUFPO1lBQ3pCZ0MsVUFBVTtnQkFDUjNCLFFBQVE7b0JBQ040QixVQUFVNUMsUUFBUVMsRUFBRTtvQkFDcEJvQyxTQUNFMUMsa0JBQWtCLFNBQ2Qsa0ZBQ0E7Z0JBQ1I7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxJQUFJQSxrQkFBa0IsVUFBVVMsaUJBQWlCO1FBQy9DLE1BQU1DLFVBQVUsTUFBTWpCLE9BQVFrQixRQUFRLENBQUNDLFFBQVEsQ0FBQytCLFFBQVEsQ0FBQ2xDO1FBQ3pELE9BQU8xQixxREFBWUEsQ0FBQ2tCLElBQUksQ0FBQztZQUN2QjJDLGFBQWFsQyxRQUFRbUMsR0FBRztZQUN4QlAsU0FBU1IsTUFBTXhCLEVBQUU7WUFDakJ3QyxnQkFBZ0JWLGFBQWE5QixFQUFFO1FBQ2pDO0lBQ0Y7SUFFQSwwREFBMEQ7SUFDMUQsT0FBT3ZCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUFDO1FBQ3ZCcUMsU0FBU1IsTUFBTXhCLEVBQUU7UUFDakJ3QyxnQkFBZ0JWLGFBQWE5QixFQUFFO0lBQ2pDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9paXQtaW50ZXJuYXRpb25hbC1zdHVkZW50LWRhc2hib2FyZC8uL2FwcC9hcGkvbWFya2V0cGxhY2UvcHVyY2hhc2Uvcm91dGUudHM/NjhiMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL21hcmtldHBsYWNlL3B1cmNoYXNlL3JvdXRlLnRzXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50U3R1ZGVudCB9IGZyb20gXCJAL2xpYi9hdXRoXCI7XHJcbmltcG9ydCBTdHJpcGUgZnJvbSBcInN0cmlwZVwiO1xyXG5cclxuY29uc3Qgc3RyaXBlU2VjcmV0ID0gcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVk7XHJcbmNvbnN0IGFwcFVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9VUkwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIjtcclxuXHJcbmNvbnN0IHN0cmlwZSA9IHN0cmlwZVNlY3JldFxyXG4gID8gbmV3IFN0cmlwZShzdHJpcGVTZWNyZXQsIHtcclxuICAgICAgYXBpVmVyc2lvbjogXCIyMDI0LTA2LTIwXCJcclxuICAgIH0pXHJcbiAgOiBudWxsO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHN0dWRlbnQgPSBhd2FpdCBnZXRDdXJyZW50U3R1ZGVudCgpO1xyXG4gIGlmICghc3R1ZGVudCkgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJVbmF1dGhvcml6ZWRcIiwgeyBzdGF0dXM6IDQwMSB9KTtcclxuXHJcbiAgY29uc3QgeyBwcm9kdWN0SWQsIHBheW1lbnRNZXRob2QgfSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcblxyXG4gIGlmICghcHJvZHVjdElkIHx8ICFwYXltZW50TWV0aG9kKSB7XHJcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIk1pc3NpbmcgcHJvZHVjdElkIG9yIHBheW1lbnRNZXRob2RcIiwge1xyXG4gICAgICBzdGF0dXM6IDQwMFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIVtcImNhcmRcIiwgXCJpbl9wZXJzb25cIl0uaW5jbHVkZXMocGF5bWVudE1ldGhvZCkpIHtcclxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiSW52YWxpZCBwYXltZW50IG1ldGhvZFwiLCB7IHN0YXR1czogNDAwIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRVbmlxdWUoe1xyXG4gICAgd2hlcmU6IHsgaWQ6IHByb2R1Y3RJZCB9XHJcbiAgfSk7XHJcblxyXG4gIGlmICghcHJvZHVjdCB8fCAhcHJvZHVjdC5pc0FjdGl2ZSkge1xyXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJQcm9kdWN0IG5vdCBhdmFpbGFibGVcIiwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICB9XHJcblxyXG4gIGlmIChwcm9kdWN0Lm93bmVySWQgPT09IHN0dWRlbnQuaWQpIHtcclxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiWW91IGNhbm5vdCBwdXJjaGFzZSB5b3VyIG93biBsaXN0aW5nXCIsIHtcclxuICAgICAgc3RhdHVzOiA0MDBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIG9yZGVyIGZpcnN0XHJcbiAgbGV0IHN0cmlwZVNlc3Npb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGlmIChwYXltZW50TWV0aG9kID09PSBcImNhcmRcIikge1xyXG4gICAgaWYgKCFzdHJpcGUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXHJcbiAgICAgICAgXCJTdHJpcGUgaXMgbm90IGNvbmZpZ3VyZWQuIFNldCBTVFJJUEVfU0VDUkVUX0tFWS5cIixcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc3RyaXBlLmNoZWNrb3V0LnNlc3Npb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGU6IFwicGF5bWVudFwiLFxyXG4gICAgICBwYXltZW50X21ldGhvZF90eXBlczogW1wiY2FyZFwiXSxcclxuICAgICAgbGluZV9pdGVtczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByaWNlX2RhdGE6IHtcclxuICAgICAgICAgICAgY3VycmVuY3k6IFwidXNkXCIsXHJcbiAgICAgICAgICAgIHVuaXRfYW1vdW50OiBwcm9kdWN0LnByaWNlQ2VudHMsXHJcbiAgICAgICAgICAgIHByb2R1Y3RfZGF0YToge1xyXG4gICAgICAgICAgICAgIG5hbWU6IHByb2R1Y3QudGl0bGUsXHJcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3QuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHF1YW50aXR5OiAxXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBzdWNjZXNzX3VybDogYCR7YXBwVXJsfS9tYXJrZXRwbGFjZS9zdWNjZXNzP3Nlc3Npb25faWQ9e0NIRUNLT1VUX1NFU1NJT05fSUR9YCxcclxuICAgICAgY2FuY2VsX3VybDogYCR7YXBwVXJsfS9tYXJrZXRwbGFjZS8ke3Byb2R1Y3QuaWR9YCxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQsXHJcbiAgICAgICAgYnV5ZXJJZDogc3R1ZGVudC5pZFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdHJpcGVTZXNzaW9uSWQgPSBzZXNzaW9uLmlkO1xyXG5cclxuICAgIC8vIE5PVEU6XHJcbiAgICAvLyBJbiBhIHByb2R1Y3Rpb24gYXBwLCB5b3UnZCBtYXJrIHRoZSBvcmRlciBhcyBcImNyZWF0ZWRcIiBub3cgYW5kXHJcbiAgICAvLyBzd2l0Y2ggdG8gXCJwYWlkXCIgaW4gYSBTdHJpcGUgd2ViaG9vay4gRm9yIHRoaXMgcHJvamVjdCwgd2XigJlsbFxyXG4gICAgLy8gaW1tZWRpYXRlbHkgbWFyayBpdCBhcyBzb2xkIHNvIGl0IGRpc2FwcGVhcnMgZnJvbSB0aGUgbWFya2V0cGxhY2UuXHJcbiAgfVxyXG5cclxuICBjb25zdCBvcmRlciA9IGF3YWl0IHByaXNtYS5vcmRlci5jcmVhdGUoe1xyXG4gICAgZGF0YToge1xyXG4gICAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQsXHJcbiAgICAgIGJ1eWVySWQ6IHN0dWRlbnQuaWQsXHJcbiAgICAgIHBheW1lbnRNZXRob2QsXHJcbiAgICAgIHN0YXR1czogcGF5bWVudE1ldGhvZCA9PT0gXCJjYXJkXCIgPyBcInBhaWRcIiA6IFwiY3JlYXRlZFwiLFxyXG4gICAgICBzdHJpcGVTZXNzaW9uSWQ6IHN0cmlwZVNlc3Npb25JZCB8fCB1bmRlZmluZWRcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gTWFyayBsaXN0aW5nIGFzIHNvbGQgLyBpbmFjdGl2ZVxyXG4gIGF3YWl0IHByaXNtYS5wcm9kdWN0LnVwZGF0ZSh7XHJcbiAgICB3aGVyZTogeyBpZDogcHJvZHVjdC5pZCB9LFxyXG4gICAgZGF0YToge1xyXG4gICAgICBpc0FjdGl2ZTogZmFsc2UsXHJcbiAgICAgIHNvbGRBdDogbmV3IERhdGUoKVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBDcmVhdGUgYnV5ZXItc2VsbGVyIGNvbnZlcnNhdGlvblxyXG4gIGNvbnN0IGNvbnZlcnNhdGlvbiA9IGF3YWl0IHByaXNtYS5tYXJrZXRwbGFjZUNvbnZlcnNhdGlvbi5jcmVhdGUoe1xyXG4gICAgZGF0YToge1xyXG4gICAgICBvcmRlcklkOiBvcmRlci5pZCxcclxuICAgICAgYnV5ZXJJZDogc3R1ZGVudC5pZCxcclxuICAgICAgc2VsbGVySWQ6IHByb2R1Y3Qub3duZXJJZCxcclxuICAgICAgbWVzc2FnZXM6IHtcclxuICAgICAgICBjcmVhdGU6IHtcclxuICAgICAgICAgIHNlbmRlcklkOiBzdHVkZW50LmlkLFxyXG4gICAgICAgICAgY29udGVudDpcclxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCA9PT0gXCJjYXJkXCJcclxuICAgICAgICAgICAgICA/IFwiSGksIEkganVzdCBwdXJjaGFzZWQgdGhpcyBpdGVtIHZpYSBjYXJkLiBXaGVuIGNhbiB3ZSBhcnJhbmdlIGRlbGl2ZXJ5L3BpY2t1cD9cIlxyXG4gICAgICAgICAgICAgIDogXCJIaSwgSSByZXNlcnZlZCB0aGlzIGl0ZW0gZm9yIGluLXBlcnNvbiBwYXltZW50LiBXaGVuIGFuZCB3aGVyZSBjYW4gd2UgbWVldCBvbiBjYW1wdXM/XCJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaWYgKHBheW1lbnRNZXRob2QgPT09IFwiY2FyZFwiICYmIHN0cmlwZVNlc3Npb25JZCkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZSEuY2hlY2tvdXQuc2Vzc2lvbnMucmV0cmlldmUoc3RyaXBlU2Vzc2lvbklkKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIGNoZWNrb3V0VXJsOiBzZXNzaW9uLnVybCxcclxuICAgICAgb3JkZXJJZDogb3JkZXIuaWQsXHJcbiAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb24uaWRcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gSW4tcGVyc29uOiBubyBleHRlcm5hbCByZWRpcmVjdCwganVzdCBzZW5kIHVzZXIgdG8gY2hhdFxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICBvcmRlcklkOiBvcmRlci5pZCxcclxuICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb24uaWRcclxuICB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiZ2V0Q3VycmVudFN0dWRlbnQiLCJTdHJpcGUiLCJzdHJpcGVTZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJhcHBVcmwiLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwic3RyaXBlIiwiYXBpVmVyc2lvbiIsIlBPU1QiLCJyZXEiLCJzdHVkZW50Iiwic3RhdHVzIiwicHJvZHVjdElkIiwicGF5bWVudE1ldGhvZCIsImpzb24iLCJpbmNsdWRlcyIsInByb2R1Y3QiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImlzQWN0aXZlIiwib3duZXJJZCIsInN0cmlwZVNlc3Npb25JZCIsInNlc3Npb24iLCJjaGVja291dCIsInNlc3Npb25zIiwiY3JlYXRlIiwibW9kZSIsInBheW1lbnRfbWV0aG9kX3R5cGVzIiwibGluZV9pdGVtcyIsInByaWNlX2RhdGEiLCJjdXJyZW5jeSIsInVuaXRfYW1vdW50IiwicHJpY2VDZW50cyIsInByb2R1Y3RfZGF0YSIsIm5hbWUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicXVhbnRpdHkiLCJzdWNjZXNzX3VybCIsImNhbmNlbF91cmwiLCJtZXRhZGF0YSIsImJ1eWVySWQiLCJvcmRlciIsImRhdGEiLCJ1bmRlZmluZWQiLCJ1cGRhdGUiLCJzb2xkQXQiLCJEYXRlIiwiY29udmVyc2F0aW9uIiwibWFya2V0cGxhY2VDb252ZXJzYXRpb24iLCJvcmRlcklkIiwic2VsbGVySWQiLCJtZXNzYWdlcyIsInNlbmRlcklkIiwiY29udGVudCIsInJldHJpZXZlIiwiY2hlY2tvdXRVcmwiLCJ1cmwiLCJjb252ZXJzYXRpb25JZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/marketplace/purchase/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentStudent: () => (/* binding */ getCurrentStudent)\n/* harmony export */ });\n// lib/auth.ts\n// Small helper used by server components (like /marketplace/my)\n// to get the current logged-in student by calling /api/auth/me.\nasync function getCurrentStudent() {\n    try {\n        // Relative URL so it works in dev and prod; Next will forward cookies\n        const res = await fetch(`${\"http://localhost:3000\" ?? 0}/api/auth/me`, {\n            cache: \"no-store\"\n        });\n        if (!res.ok) {\n            return null;\n        }\n        const data = await res.json();\n        // api/auth/me is expected to return { student: {...} | null }\n        return data.student ?? null;\n    } catch (err) {\n        console.error(\"getCurrentStudent error:\", err);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsY0FBYztBQUNkLGdFQUFnRTtBQUNoRSxnRUFBZ0U7QUFZekQsZUFBZUE7SUFDcEIsSUFBSTtRQUNGLHNFQUFzRTtRQUN0RSxNQUFNQyxNQUFNLE1BQU1DLE1BQ2hCLENBQUMsRUFBRUMsdUJBQStCLElBQUksQ0FBRSxDQUFDLFlBQVksQ0FBQyxFQUN0RDtZQUNFRyxPQUFPO1FBQ1Q7UUFHRixJQUFJLENBQUNMLElBQUlNLEVBQUUsRUFBRTtZQUNYLE9BQU87UUFDVDtRQUVBLE1BQU1DLE9BQU8sTUFBTVAsSUFBSVEsSUFBSTtRQUMzQiw4REFBOEQ7UUFDOUQsT0FBT0QsS0FBS0UsT0FBTyxJQUFJO0lBQ3pCLEVBQUUsT0FBT0MsS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsNEJBQTRCRjtRQUMxQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2lpdC1pbnRlcm5hdGlvbmFsLXN0dWRlbnQtZGFzaGJvYXJkLy4vbGliL2F1dGgudHM/YmY3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvYXV0aC50c1xyXG4vLyBTbWFsbCBoZWxwZXIgdXNlZCBieSBzZXJ2ZXIgY29tcG9uZW50cyAobGlrZSAvbWFya2V0cGxhY2UvbXkpXHJcbi8vIHRvIGdldCB0aGUgY3VycmVudCBsb2dnZWQtaW4gc3R1ZGVudCBieSBjYWxsaW5nIC9hcGkvYXV0aC9tZS5cclxuXHJcbmV4cG9ydCB0eXBlIEN1cnJlbnRTdHVkZW50ID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZnVsbE5hbWU6IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIGF2YXRhclVybDogc3RyaW5nIHwgbnVsbDtcclxuICBzdHVkZW50VHlwZTogc3RyaW5nO1xyXG4gIHByb2dyYW06IHN0cmluZztcclxuICBpc0FkbWluOiBib29sZWFuO1xyXG59IHwgbnVsbDtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50U3R1ZGVudCgpOiBQcm9taXNlPEN1cnJlbnRTdHVkZW50PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFJlbGF0aXZlIFVSTCBzbyBpdCB3b3JrcyBpbiBkZXYgYW5kIHByb2Q7IE5leHQgd2lsbCBmb3J3YXJkIGNvb2tpZXNcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMID8/IFwiXCJ9L2FwaS9hdXRoL21lYCxcclxuICAgICAge1xyXG4gICAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCJcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIC8vIGFwaS9hdXRoL21lIGlzIGV4cGVjdGVkIHRvIHJldHVybiB7IHN0dWRlbnQ6IHsuLi59IHwgbnVsbCB9XHJcbiAgICByZXR1cm4gZGF0YS5zdHVkZW50ID8/IG51bGw7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiZ2V0Q3VycmVudFN0dWRlbnQgZXJyb3I6XCIsIGVycik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImdldEN1cnJlbnRTdHVkZW50IiwicmVzIiwiZmV0Y2giLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsImNhY2hlIiwib2siLCJkYXRhIiwianNvbiIsInN0dWRlbnQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n// lib/prisma.ts\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"error\",\n        \"warn\"\n    ]\n});\n// Avoid multiple instances in dev with Next.js hot reload\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxnQkFBZ0I7QUFDOEI7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO1FBQVM7S0FBTztBQUN4QixHQUFHO0FBRUwsMERBQTBEO0FBQzFELElBQUlDLElBQXFDLEVBQUU7SUFDekNKLGdCQUFnQkUsTUFBTSxHQUFHQTtBQUMzQjtBQUVBLGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWl0LWludGVybmF0aW9uYWwtc3R1ZGVudC1kYXNoYm9hcmQvLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL3ByaXNtYS50c1xyXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgcHJpc21hPzogUHJpc21hQ2xpZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xyXG4gIG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gICAgbG9nOiBbXCJlcnJvclwiLCBcIndhcm5cIl0sIC8vIGtlZXAgbG9ncyBtaW5pbWFsIGJ1dCB1c2VmdWxcclxuICB9KTtcclxuXHJcbi8vIEF2b2lkIG11bHRpcGxlIGluc3RhbmNlcyBpbiBkZXYgd2l0aCBOZXh0LmpzIGhvdCByZWxvYWRcclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/stripe","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/qs","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/object-inspect","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/hasown","vendor-chunks/get-intrinsic","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/call-bound"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmarketplace%2Fpurchase%2Froute&page=%2Fapi%2Fmarketplace%2Fpurchase%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmarketplace%2Fpurchase%2Froute.ts&appDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLegacy%5CDesktop%5Ciit-international-student-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();