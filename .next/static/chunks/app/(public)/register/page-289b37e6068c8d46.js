(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{2077:function(e,t,s){Promise.resolve().then(s.bind(s,5502))},5502:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),l=s(2265),r=s(9376),n=s(7648);let o=["Undergraduate","Graduate","Exchange","Visiting Scholar","Other"],i="dzzznohpr",d="istudentshub_marketplace";function c(){let e=(0,r.useRouter)(),[t,s]=(0,l.useState)(""),[c,u]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[f,g]=(0,l.useState)(""),[b,y]=(0,l.useState)(""),[j,N]=(0,l.useState)(null),[v,w]=(0,l.useState)(null),[S,k]=(0,l.useState)(!1),[C,P]=(0,l.useState)(null),[_,R]=(0,l.useState)(!1),O=async()=>{if(!j)return null;if(!i||!d)return console.error("Missing Cloudinary env vars"),null;k(!0);try{let e=new FormData;e.append("file",j),e.append("upload_preset",d);let t=await fetch("https://api.cloudinary.com/v1_1/".concat(i,"/upload"),{method:"POST",body:e}),s=await t.json();if(!t.ok)return console.error("Cloudinary upload error:",s),P("Failed to upload profile image. Please try again."),null;return s.secure_url}catch(e){return console.error("Cloudinary upload error:",e),P("Failed to upload profile image. Please try again."),null}finally{k(!1)}},F=async s=>{if(s.preventDefault(),P(null),!t||!c||!x||!f||!b){P("Full name, email, password, student type, and program are required.");return}if(x!==m){P("Passwords do not match.");return}R(!0);try{let s=null;if(j&&!(s=await O())){R(!1);return}let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:t,email:c,password:x,studentType:f,program:b,avatarUrl:s})}),l=await a.json();if(!a.ok)throw Error(l.error||"Registration failed.");e.push("/login")}catch(e){P(e.message||"Registration failed.")}finally{R(!1)}};return(0,a.jsxs)("div",{className:"mx-auto flex min-h-[70vh] max-w-md flex-col justify-center px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-6 text-center",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-red-600",children:"iStudentsHub \xb7 IIT"}),(0,a.jsx)("h1",{className:"mt-2 text-2xl font-semibold text-slate-900",children:"Create your student account"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:"Sign up with your IIT details so we can personalize your onboarding."})]}),(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm shadow-slate-300/80",children:[C&&(0,a.jsx)("div",{className:"rounded-lg border border-red-300 bg-red-50 px-3 py-2 text-xs text-red-700",children:C}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Full name",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"Aisha Mensah"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["IIT email",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"you@hawk.iit.edu"})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Password",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"password",value:x,onChange:e=>p(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"••••••••"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Confirm password",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"password",value:m,onChange:e=>h(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"••••••••"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Student type",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",children:[(0,a.jsx)("option",{value:"",children:"Select your student type"}),o.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Program / Major",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"M.S. Cyber Forensics & Security"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-700",children:"Profile photo (optional)"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[v?(0,a.jsx)("img",{src:v,alt:"Avatar preview",className:"h-12 w-12 rounded-full object-cover ring-2 ring-red-500/60"}):(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-200 text-xs text-slate-500",children:"No photo"}),(0,a.jsxs)("div",{className:"flex-1 text-xs text-slate-600",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&(N(s),w(URL.createObjectURL(s)))},className:"block w-full text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-red-600 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-white hover:file:bg-red-500"}),(0,a.jsx)("p",{className:"mt-1 text-[10px] text-slate-500",children:"Square images work best (e.g., 400x400). You can update this later in your profile."}),S&&(0,a.jsx)("p",{className:"mt-0.5 text-[10px] text-red-600",children:"Uploading image…"})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:_||S,className:"flex w-full items-center justify-center rounded-lg bg-red-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm shadow-red-300 hover:bg-red-500 disabled:cursor-not-allowed disabled:bg-red-300",children:_?"Creating your account...":"Create account"}),(0,a.jsxs)("p",{className:"pt-1 text-center text-xs text-slate-600",children:["Already have an account?"," ",(0,a.jsx)(n.default,{href:"/login",className:"font-semibold text-red-600 hover:text-red-500",children:"Login"})]})]})]})}},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var a=s(2972),l=s.n(a)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=2077)}),_N_E=e.O()}]);